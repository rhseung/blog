#algorithm 

> [!abstract]
> 동적계획법(Dynamic Programming, 이하 DP)이란 굉장히 중요한 프로그래밍 기법이다.
> 
> 반복되는 연산을 다른 곳에 저장해두었다가 가져다 쓴다는 매우 단순한 생각에서 출발하나, 어떤 식으로 저장할 것인지, 반복되는 연산이 어떤 것인지 계획하고 찾아내는 것이 순수 '감각'에 의존하기 때문에 어려운 문제는 무지하게 어렵다. 또한, 저장 구조를 효율적으로 짜지 않으면 '메모리 초과'를 받을 수 있기에 더 어려워지기도 한다.

---

간단하게 피보나치 수를 구하는 알고리즘을 DP를 사용한 코드와 아닌 코드를 비교하며 봐보자.

```cpp
int fibonacci(int n) {
  if (n == 1) return 1;
  if (n == 2) return 1;
  
  cout << "fibonacci(" << n << ") called" << endl;
  
  return fibonacci(n - 1) + fibonacci(n - 2);
}
```

```cpp
int F[1000];

int fibonacci(int n) {
  if (n == 1) return 1;
  if (n == 2) return 1;
  
  if (F[n] != 0)
	  return F[n];
	  
  cout << "fibonacci(" << n << ") called" << endl;
  
  return F[n] = fibonacci(n - 1) + fibonacci(n - 2);
}
```

각각 `fibonacci(10)`을 출력해보면 동일하게 `55`가 나오는 것을 확인할 수 있으나, 호출 스택을 보면 다른 것을 알 수 있다.

```
fibonacci(10) called
fibonacci(9) called
fibonacci(8) called
fibonacci(7) called
fibonacci(6) called
fibonacci(5) called
fibonacci(4) called
fibonacci(3) called
fibonacci(3) called
... 40 lines
fibonacci(4) called
fibonacci(3) called
fibonacci(3) called
fibonacci(4) called
fibonacci(3) called
55
```

```
fibonacci(10) called
fibonacci(9) called
fibonacci(8) called
fibonacci(7) called
fibonacci(6) called
fibonacci(5) called
fibonacci(4) called
fibonacci(3) called
55
```

동일한 연산의 절약, `F` 배열에 저장해 꺼내 쓰는 것으로 비약적인 최적화를 이뤄냈다. 이것이 DP이다.

---

DP에는 크게 2가지의 방식이 있다.
- Top-down 방식
- Bottom-up 방식

이 역시 피보나치의 예제를 보며 알아보자.

```cpp
int F[1000];

// Top-down
int fibonacci(int n) {
  if (n == 1) return 1;
  if (n == 2) return 1;
  
  if (F[n] != 0)
	  return F[n];
  
  return F[n] = fibonacci(n - 1) + fibonacci(n - 2);
}
```

```cpp
int F[1000];

// Bottom-up
int fibonacci(int n) {
  F[1] = 1;
  F[2] = 1;
  
  for (int i = 3; i <= n; ++i) {
    F[i] = F[i - 1] + F[i - 2];
  }
  
  return F[n];
}
```

보통 성능은 Top-down보다 Bottom-up이 더 좋다. 그러나 생각하기 쉬운 건 Top-down.

---

풀어볼 문제들
- [12865번: 평범한 배낭](https://www.acmicpc.net/problem/12865)
- [문제집: 역대 DP 연습셋 기출문제 (kks227)](https://www.acmicpc.net/workbook/view/2163)